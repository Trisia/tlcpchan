server:
  api:
    address: ":30080"
  ui:
    enabled: true
    address: ":30000"
    path: "./ui"
  log:
    level: "info"
    file: "./logs/tlcpchan.log"
    max_size: 100
    max_backups: 5
    max_age: 30
    compress: true
    enabled: true

instances:
  # TLCP服务端代理示例
  - name: "tlcp-server-demo"
    type: "server"
    protocol: "tlcp"
    listen: ":30443"
    target: "127.0.0.1:8080"
    enabled: false
    certificates:
      tlcp:
        cert: "server-sm2"
        key: "server-sm2"
    tlcp:
      auth: "one-way"
      min_version: "1.1"
      max_version: "1.1"
      cipher_suites:
        - "ECDHE_SM4_GCM_SM3"
        - "ECC_SM4_GCM_SM3"

  # TLS服务端代理示例
  - name: "tls-server-demo"
    type: "server"
    protocol: "tls"
    listen: ":38443"
    target: "127.0.0.1:8080"
    enabled: false
    certificates:
      tls:
        cert: "server-rsa"
        key: "server-rsa"
    tls:
      auth: "one-way"
      min_version: "1.2"
      max_version: "1.3"

  # 客户端代理示例
  - name: "client-demo"
    type: "client"
    protocol: "auto"
    listen: ":39000"
    target: "example.com:443"
    enabled: false
    server_ca:
      - "ca-rsa"
    tls:
      auth: "none"
      insecure_skip_verify: true

  # HTTP代理示例
  - name: "http-proxy-demo"
    type: "http-server"
    protocol: "tlcp"
    listen: ":38444"
    target: "127.0.0.1:8000"
    enabled: false
    certificates:
      tlcp:
        cert: "server-sm2"
        key: "server-sm2"
    tlcp:
      auth: "one-way"
    http:
      request_headers:
        add:
          X-Proxy: "tlcpchan"
          X-Real-IP: "$remote_addr"
        remove:
          - "X-Forwarded-For"
      response_headers:
        add:
          Server: "TLCPChan/1.0"
